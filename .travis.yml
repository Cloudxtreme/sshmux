language: python
python:
  - "2.7"
install:
  - pip install -r requirements.txt
  - pip install flake8
  - pip install -e .
before_script:
  # Allow us to SSH passwordless to localhost
  - ssh-keygen -f ~/.ssh/id_rsa -N ""
  - cp ~/.ssh/{id_rsa.pub,authorized_keys}
  - eval $(ssh-agent)
  - ssh-add
  - export sshmux_test_host=127.0.0.1
  - export sshmux_test_user=travis
  - export sshmux_test_key=~/.ssh/id_rsa
script:
  - flake8 sshmux/.
  - python tests/test_ssh.py -v
